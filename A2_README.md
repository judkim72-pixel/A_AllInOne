# A2: 분포 개선(Distribution Refinement) – README

본 문서는 **A2 모듈**(분포 개선)의 목적, 입력 스키마, 실행 방법, 주요 기능, 해석 가이드, 트러블슈팅, 통합 런처 연동법을 정리한 README 입니다.  
A2는 A1의 기본 통계/시각화를 기반으로, **지표 분포를 더 정밀하게 해석**하고 **그래프 하단 자동 해설**을 일관되게 제공하도록 개선된 페이지입니다.

---

## 1) 목적(Why A2?)
- A1 수행 결과, **지표 스코어가 1~4의 좁은 정수 범위**여서 분포가 단순하고 해석력이 약하다는 문제가 있었습니다.
- A2는 **스코어 분해능을 1~10(또는 0~100 재스케일)**로 확장하고, **분포 해석 보조 캡션(평균/중앙값/IQR/꼬리 방향)**을 자동 생성하여, **수준별 편차·분포 해석의 품질을 향상**합니다.

---

## 2) 주요 기능(Features)
1. **입력 감지**
   - 필수: `Company` (기업명)
   - 선택: `Category` (기업군/업종 등 그룹 레이블)
   - 나머지 **수치형 컬럼 = 지표**로 자동 인식
2. **스케일/정밀도 개선**
   - 기존 1~4 스코어를 **1~10 스케일**로 전환 권장(또는 0~100으로 **선형 재스케일** 옵션 제공)
   - 지표별 **가중치(합=1) 설정**으로 **종합점수(Composite Score)** 산출
3. **분포 시각화 + 자동 해설**
   - **히스토그램**(지표별/종합점수) – 구간수 자동/수동 설정
   - **박스플롯**(카테고리별) – 중앙값/사분위 비교
   - **그래프 하단 캡션 자동 생성**: 평균/중앙값/IQR 및 꼬리 방향 요약
4. **분위 기반 등급화**
   - 종합점수의 **33%/66% 분위** 기준으로 `Low / Mid / Top` 구간 레이블링
5. **다운로드**
   - 정제 테이블, 등급 포함 결과를 **CSV**로 내보내기

---

## 3) 입력 데이터 스키마(Input Schema)
- 최소 컬럼
  - **Company**: 기업명(문자열)
- 선택 컬럼
  - **Category**: 업종/분류(문자열)
- 지표 컬럼
  - `int` 또는 `float` 타입의 **수치형 지표** (예: `UX_Maturity`, `AI_Adoption`, `Process_Discipline` …)
- 권장: 원시 점수(1~10) 또는 기존 점수(1~4)를 업로드 후 A2 내 **재스케일 옵션** 활용

**예시 CSV**

```csv
Company,Category,UX_Maturity,AI_Adoption,Process_Discipline
Alpha Inc,Defense,7,6,8
Beta Co,Consumer,5,7,6
Gamma LLC,Defense,8,9,7
```

---

## 4) 실행(How to Run)

### A. 단일 페이지 실행
```bash
streamlit run A2_distribution_refine.py
```
> 파일명이 다를 수 있습니다. 실제 프로젝트 내 A2 파일명을 사용하세요.

### B. 통합 런처에서 실행
`main_launcher.py` (예시):
```python
import streamlit as st
import importlib

PAGES = {
    "A1: 기초 분석": "A1_xxx",
    "A2: 분포 개선": "A2_distribution_refine",
    "A3: 세그멘테이션": "A3_company_segmentation",
}
choice = st.sidebar.radio("페이지 선택", list(PAGES.keys()))
page = importlib.import_module(PAGES[choice])
if hasattr(page, "main"):
    page.main()
```

---

## 5) 인터랙션/옵션(Controls)
- **CSV 업로드**: `Company` 필수, `Category` 선택, 수치형 지표 자동 인식
- **스케일 가정(assumed min/max)**: 기본 `1~10`
- **0~100 재스케일** 체크박스: 해석 일관성/시각화 스케일 통일
- **가중치 설정**: 지표별 가중치 입력 → 내부에서 합=1로 정규화
- **구간 수(bins)**: 히스토그램 가독성에 맞춰 조정(기본 자동)

---

## 6) 출력(Outputs)
- **결과 테이블**
  - 원시 지표 + `_scaled` 컬럼 + `CompositeScore` + `Tier`
  - `CompositeScore` 내림차순 정렬
- **시각화**
  - 종합점수 히스토그램 + 자동 해설
  - (옵션) 지표별 히스토그램(최대 N개) + 자동 해설
  - (옵션) 카테고리별 박스플롯 + 중앙값 비교 해설
- **다운로드**
  - `A2_distribution_results.csv` (파일명 프로젝트 표준에 맞춰 조정 가능)

---

## 7) 해석 가이드(Interpretation)
- **히스토그램 막대의 세로 높이**는 **해당 구간에 속한 기업 수(빈도)**를 의미합니다.
- **중앙값 구간 막대가 짧고 양옆이 길다**: 분포가 **양 극단에 상대적으로 더 많은 빈도를 가짐**을 의미할 수 있습니다(이산 스코어/샘플 크기에 따라 달라질 수 있음).
- **자동 해설**은 평균/중앙값/IQR 및 **꼬리 방향(평균 vs 중앙값 비교)**을 요약하므로, 분포의 **치우침/대칭성/분산**을 빠르게 파악하는 데 도움이 됩니다.
- **카테고리 박스플롯**: 중앙값 차이와 IQR을 통해 **그룹 간 상대적 성과/변동성**을 비교하세요.

---

## 8) 베스트 프랙티스(Best Practices)
- **스케일 통일**: 여러 지표를 합산 비교할 때는 0~100 재스케일 사용을 권장
- **이상치 확인**: 박스플롯으로 이상치 분포를 확인하고, 필요하다면 전처리 규칙(클리핑/변환)을 문서화
- **가중치 근거 명시**: 가중치 설정은 평가 목적과 기준에 따라 달라질 수 있으니 사전에 기준을 합의
- **샘플 크기 표기**: 슬라이드/리포트에는 N(표본 수)을 함께 표기해 오해를 줄임

---

## 9) 트러블슈팅(Troubleshooting)
- **필수 컬럼 누락**: `Company`가 없으면 에러. CSV 헤더를 재확인
- **지표 감지 안 됨**: 모든 숫자 컬럼이 문자열로 저장된 경우 → 숫자 변환 필요
- **스케일 왜곡**: `assumed min/max`가 실제 분포와 크게 다르면 왜곡 가능 → 업로드 전 정규화 또는 적정 범위 설정
- **한글 인코딩 문제**: CSV 저장 시 `utf-8-sig` 권장

---

## 10) 폴더/파일 구조 예시
```
project_root/
├─ main_launcher.py
├─ A1_basic_stats.py
├─ A2_distribution_refine.py   # (본 README 대상)
├─ A3_company_segmentation.py
└─ data/
   └─ companies_sample.csv
```

---

## 11) 변경 이력(Changelog, A2 기준)
- v1.0.0: 분포 개선 모듈 초판 배포
  - 1~10 스케일 가정 및 0~100 재스케일 옵션 추가
  - 그래프 하단 자동 해설(평균/중앙값/IQR/꼬리 방향)
  - 분위 기반 등급화(Low/Mid/Top)

---

## 12) 라이선스/주석
- 본 모듈은 내부 세미나 자료 제작을 위한 **사내 전용**으로 사용됩니다.
- 외부 배포 시 데이터 보안/저작권/표시 규정 준수 필수.
